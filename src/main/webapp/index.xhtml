<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

<h:head>
	<title>Hospital Management Dashboard</title>
</h:head>

<h:body style="background-color:powderblue;">
	<h2>Patient Appointment for today</h2>
	<h:form>
		<h:commandButton id="getPatients"
			actionListener="#{patientModel.getPatientsForToday()}"
			value="Today's Appointments">
			<f:ajax execute="getPatients" render="appointments" />
		</h:commandButton>
		<br />
		<h:panelGroup id="appointments">
			<table border="1">
				<br />
				<tr>
					<th>Patient Name</th>
					<th>Gender</th>
					<th>Age</th>
					<th>Email</th>
					<th>Last visited</th>
				</tr>
				<ui:repeat value="#{patientModel.result}" var="patientModelData">
					<tr>
						<td><h:outputText value="#{patientModelData.patientName}" /></td>
						<td><h:outputText value="#{patientModelData.gender}" /></td>
						<td><h:outputText value="#{patientModelData.age}" /></td>
						<td><h:outputText value="#{patientModelData.email}" /></td>
						<td><h:outputText value="#{patientModelData.lastVisited}" /></td>
						<td><h:commandButton
								actionListener="#{patientModel.rescheduleAppointment(patientModelData.patient_id)}"
								value="Reschedule" /></td>
					</tr>
				</ui:repeat>
			</table>
		</h:panelGroup>
	</h:form>
	<h2>Ward Availability</h2>
	<h2>Pharmacy Inventory</h2>
	<h:form>
		<h:inputText id="likeItemName" value="#{pharmacyModel.itemName}" />
		<h:commandButton actionListener="#{pharmacyModel.searchForItem()}"
			value="Search">
			<f:ajax execute="likeItemName @this" render="itemInventory" />
		</h:commandButton>
		<br />

		<h:panelGroup id="itemInventory">
			<table border="1">
				<br />
				<tr>
					<th>Item Name</th>
					<th>Quantity</th>
					<th>Price</th>
				</tr>
				<ui:repeat value="#{pharmacyModel.pharmacyModelData}"
					var="pharmacyData">
					<tr>
						<td><h:outputText value="#{pharmacyData.itemName}" /></td>
						<td><h:outputText value="#{pharmacyData.itemQuantity}" /></td>
						<td><h:outputText value="#{pharmacyData.itemPrice}" /></td>
						<td>
						<h:inputText id="emailToNotify" value="#{pharmacyModel.notifyForEmail}" />
						<h:commandButton actionListener="#{pharmacyModel.addToNotification(pharmacyData.itemId)}" value="Notify">
						<f:ajax execute="emailToNotify @this"/>
						</h:commandButton>
						</td>
					</tr>
				</ui:repeat>
			</table>
		</h:panelGroup>
	</h:form>

	<h2>Doctor Availability</h2>
</h:body>
</html>